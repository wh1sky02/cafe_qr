{% extends "admin_panel/base_admin.html" %}
{% load static tailwind_tags %}
{% block content %}
<!-- Page Header is inherited from base_admin.html -->
<div class="p-6 w-full">
  <!-- Search Bar -->
  <div class="flex justify-end mb-6">
    <input type="text" id="searchInput" placeholder="Table No." class="bg-gray-200 text-gray-600 rounded-full py-2 px-4 w-52 outline-none italic focus:bg-white focus:text-gray-900 focus:border focus:border-gray-400" />
    <button id="searchBtn" class="ml-2 bg-teal-600 text-white py-2 px-4 rounded-full hover:bg-teal-700">Search</button>
  </div>

  <!-- Dynamic Table Cards -->
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 justify-items-center">
    {% for table in tables %}
      <div class="bg-white rounded-lg shadow-md overflow-hidden transform transition-transform hover:-translate-y-1 hover:shadow-lg w-full max-w-sm" data-tableno="{{ table.number }}">
        <div class="bg-teal-600 text-white py-2 px-4 font-bold flex justify-between">
          Table {{ table.number }}
        </div>
        <div class="p-4">
          <p class="text-sm text-gray-700">
            <strong>Customer Name:</strong> {{ table.customer_name|default:"-" }}
          </p>
          <p class="mt-2 text-sm text-gray-700">
            <strong>Status:</strong>
            <span class="inline-block text-xs px-2 py-1 rounded-full {% if table.is_active %}bg-green-100 text-green-700{% else %}bg-yellow-100 text-yellow-700{% endif %}">
              {% if table.is_active %}Occupied{% else %}Available{% endif %}
            </span>
          </p>
          <p class="mt-2 text-sm text-gray-700">
            <strong>Order ID:</strong> {{ table.order_id|default:"-" }}
          </p>
          <button class="mt-4 bg-red-200 text-red-600 py-1 px-3 rounded hover:bg-red-300">Move</button>
        </div>
      </div>
    {% endfor %}
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const searchBtn = document.getElementById("searchBtn");
    const searchInput = document.getElementById("searchInput");
    const tableCards = document.querySelectorAll("[data-tableno]");

    // Simple search by table number
    searchBtn.addEventListener("click", () => {
      const searchTerm = searchInput.value.trim().toLowerCase();
      tableCards.forEach(card => {
        const tableNo = card.getAttribute("data-tableno").toLowerCase();
        card.style.display = (tableNo.includes(searchTerm) || searchTerm === "")
          ? "block"
          : "none";
      });
    });
  });
</script>
{% endblock %}
